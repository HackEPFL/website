<% layout( 'layout' ) -%>

<% script( '/js/home.js' ) %>

  <section id="cover"></section>

  <main id="main-content">

    <div class="row">
      <div class="small-12 columns">
        <p class="big-lead text-center">
          Hackers at EPFL promotes the hacking culture and aims<br />
          to foster innovation at EPFL, one amazing event at a time.<br />
          Make new friends. Make stuff. Make the difference.
        </p>
      </div>
    </div>

    <div class="row">

      <div class="small-12 large-4 columns">
        <section id="upcoming-event">
          <h3>
            Upcoming event
            <% if( events.future.length > 1 ) { %>
            <small><a href="/events">See all <%= events.future.length %> upcoming events</a></small>
            <% } %>
          </h3>

          <div class="row">
            <% if( !events.future.length ) { %>
            <div class="twelve columns">
              <p>There are no upcoming events.
              Check out our <a href="/events">past events</a> or our <a href="http://www.facebook.com/hackepfl/">Facebook page</a>.</p>
            </div>
            <% } else { %>
              <% for( var i = 0; i < events.future.length && i < 1; i++ ) { var event = events.future[ i ]; %>
                <div class="six columns">
                  <a href="/events/<%= event.slug %>">
                    <img src="https://graph.facebook.com/<%= event.id %>/picture?type=large" />
                  </a>
                  <h5><a href="/events/<%= event.slug %>"><%= event.name %></a></h5>
                  <p><%= event.summary %></p>
                </div>
              <% } %>
            <% } %>
          </div>
        </section>
      </div>

      <div class="small-12 large-4 columns">
        <section id="news">
          <h3>Latest news</h3>
          <ul class="no-bullet latest-news">
            <% for( var i = 0; i < news.length; i++ ) { %>
              <li>
                <a href="<%= news[ i ].link %>"><%= news[ i ].title %></a>
                <small><%= moment( news[ i ].date ).format( 'LL' ) %></small>
              </li>
            <% } %>
          </ul>
        </section>
      </div>

      <div class="small-12 large-4 columns">
        <section id="newsletter">
          <div class="panel">
            <p>Subscribe to the mailing list:</p>
            <form id="subscribe" method="post" action="/subscribe">
              <div class="row">
                <div class="small-12 large-12 columns">
                  <input name="email" type="email" required placeholder="your@email.com" class="email">
                </div>
              </div>
              <div class="row">
                <div class="small-12 large-12 columns">
                  <input type="submit" class="small button right submit" value="Subscribe">
                </div>
              </div>
            </form>
          </div>
        </section>
      </div>

    </div>

  </main>
